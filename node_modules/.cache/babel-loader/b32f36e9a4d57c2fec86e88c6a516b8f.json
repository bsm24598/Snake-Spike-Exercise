{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/Snake-Spike/spike-exercise-snake-game/react-snake-START-HERE/src/App.js\";\n\n/*\nTeam Eikon - Spike Exercise - Snake Game\n\nPurpose: To get our team familiar with moving and manipulating objects around the DOM with React JS.\n          This will assist us with creating tree visualizations and node transitions \n          for our final project.\n\nCITATIONS: Resources, tutorials, and websites used or referenced for this spike exercise are below.\n\n  1. Snake in 100 Lines Tutorial: https://github.com/weibenfalk/react-snake-starter-files\n  2. INK - ReactJS Console Applications (Snake Tutorial): https://www.youtube.com/watch?v=GaRXxmofjhw\n  3. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform\n  4. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillRect\n  5. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D\n  6. Snake Tutorial: https://github.com/ChigabigaChannel/react-hour-projects/tree/master/snake-game/src\n                    https://www.youtube.com/watch?v=-oOgsGP3t5o && https://www.youtube.com/watch?v=lgK7OTdT-eo\n  7. SNAKE GAME in React js: https://www.youtube.com/watch?v=SGsRHWu_01U\n  8. Making a snake game using React Hooks: https://dev.to/aligumustosun/making-a-snake-game-using-react-hooks-5606\n*/\nimport Button from '@material-ui/core/Button';\nimport { useInterval as setLoopSpeed } from \"./useInterval\"; //change\n\nimport React from \"react\";\nimport { useState, useEffect, useRef } from 'react';\nconst snakeWindowSize = [window.innerWidth - 600, window.innerHeight - 200];\nlet totalScore = 0;\nlet snakeCoordinates = [[11, 10]];\n/*\n  This vairable contains the last arrow key code that was pushed.\n  This helps avoid key collisions with the snake. For example,\n  pressing the left arrow followed by the right arrow can kill the\n  snake if the last arrow key is not kept track of.\n*/\n\nlet lastArrowPushed = 0; //Generates random coordinates for apple placement\n\nlet appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)]; //resizes shape objects\n\nlet resizingFactor = 34; //Controls snake speed\n\nlet snakeSpeed = 220; //Creates a new target rectangle for the snake to eat upon collision\n\nfunction createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape) {\n  while (snakeEatsTargetShape(newTargetShape, arrayCopy)) {\n    newTargetShape = createNewTargetShape();\n  }\n\n  return newTargetShape;\n}\n/*\n  function getArrowKeyEvent\n  Takes in a key event to direct snake movement.\n  Logic helps avoid collisions with body parts \n  of the snake. (e.g. pressing up arrow followed by down arrow)\n*/\n\n\nfunction getArrowKeyEvent(changeSnakeDirection) {\n  return ({\n    keyCode\n  }) => {\n    console.log(\"snake is moving\");\n    console.log(keyCode);\n\n    if (keyCode === 38) {\n      console.log(\"Up ARROW pushed\");\n\n      if (!(lastArrowPushed === 40)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 38;\n        changeSnakeDirection([0, -1]);\n      }\n    } else if (keyCode === 39) {\n      console.log(\"Right ARROW pushed\");\n\n      if (!(lastArrowPushed === 37)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 39;\n        changeSnakeDirection([1, 0]);\n      }\n    } else if (keyCode === 40) {\n      console.log(\"Down ARRAOW pushed\");\n\n      if (!(lastArrowPushed === 38)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 40;\n        changeSnakeDirection([0, 1]);\n      }\n    } else if (keyCode === 37) {\n      console.log(\"Left ARROW pushed\");\n\n      if (!(lastArrowPushed === 39)) {\n        console.log(\"All is good\");\n        lastArrowPushed = 37;\n        changeSnakeDirection([-1, 0]);\n      }\n    }\n  };\n}\n/*\n  function stopAllAnimation\n    Stops all animation when the game is over.\n*/\n\n\nfunction stopAllAnimation(setSnakeSpeed, playerLoses) {\n  return () => {\n    //Kills the snake speed\n    setSnakeSpeed(null); //sets player loss variable to true\n\n    playerLoses(true); //Give alert message\n\n    alert(\"Nice Job! You ate \" + totalScore + \" apples!\");\n  };\n}\n\nfunction placeNewApple(targetShape) {\n  return () => targetShape.map((_a, i) => Math.floor(Math.random() * (snakeWindowSize[i] / resizingFactor)));\n}\n\nconst App = () => {\n  let [youLose, setYouLose] = useState(false);\n  let canvas = useRef();\n  let [snakeShapes, startingSnakePosition] = useState(snakeCoordinates);\n  let [targetShape, targetShapeLocation] = useState(appleCoordinates);\n  let [snakeDirections, changeSnakeDirection] = useState([0, -1]);\n  let [snakeSpeed, setSnakeSpeed] = useState(null);\n  let [backgroundColor, setBackgroundColor] = useState(\"black\");\n  setLoopSpeed(() => snakeController(), snakeSpeed);\n  let stopMovement = stopAllAnimation(setSnakeSpeed, setYouLose);\n  const snakeKeyMovement = getArrowKeyEvent(changeSnakeDirection);\n\n  const playSnakeGame = () => {\n    //Sets snake speed upon hitting the play button\n    //This overrides snake speed above.\n    //Adjust here for different speeds.\n    snakeSpeed = 180; //Gives random apple coordinates for next game\n\n    appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)]; //Resets total apple score\n\n    totalScore = 0; //Sets the location of the target shape (apple)\n\n    targetShapeLocation(appleCoordinates); //Sets starting snake position\n\n    startingSnakePosition(snakeCoordinates); //Sets the initial snake direction\n\n    changeSnakeDirection([0, -1]); //Sets snake speed\n\n    setSnakeSpeed(snakeSpeed); //Resets player loss \n\n    setYouLose(false);\n  };\n\n  const changeBackgroundColor = () => {\n    setBackgroundColor(\"lightblue\");\n  };\n\n  const createNewTargetShape = placeNewApple(targetShape);\n\n  const shapeResizingFactor = (snakeItem, snakeBody = snakeShapes) => {\n    if (snakeItem[0] * resizingFactor >= snakeWindowSize[0] || snakeItem[0] < 0 || snakeItem[1] * resizingFactor >= snakeWindowSize[1] || snakeItem[1] < 0) {\n      return true;\n    }\n\n    for (let snakeShape of snakeBody) {\n      if (snakeItem[0] === snakeShape[0] && snakeItem[1] === snakeShape[1]) return true;\n    }\n\n    return false;\n  };\n\n  const snakeEatsApple = arrayCopy => {\n    if (targetShape[0] === arrayCopy[0][0] && targetShape[1] === arrayCopy[0][1]) {\n      //creates a new target shape for the snake\n      let newTargetShape = createNewTargetShape();\n      newTargetShape = createNewTargetShape(shapeResizingFactor, newTargetShape, arrayCopy, createNewTargetShape);\n      targetShapeLocation(newTargetShape); //slowly increases snake speed as apples are eaten\n\n      if (snakeSpeed >= 70) {\n        snakeSpeed = snakeSpeed - 10;\n        setSnakeSpeed(snakeSpeed);\n      } //increments score\n\n\n      totalScore += 1;\n      return true;\n    }\n\n    return false;\n  };\n\n  const snakeController = () => {\n    const snakeCopy = JSON.parse(JSON.stringify(snakeShapes)); //creates snake head from array and copies directions over\n\n    const newSnakeHead = [snakeCopy[0][0] + snakeDirections[0], snakeCopy[0][1] + snakeDirections[1]];\n    snakeCopy.unshift(newSnakeHead);\n\n    if (shapeResizingFactor(newSnakeHead)) {\n      stopMovement();\n    }\n\n    if (!snakeEatsApple(snakeCopy)) {\n      snakeCopy.pop();\n    }\n\n    startingSnakePosition(snakeCopy);\n  };\n\n  useEffect(() => {\n    const allShapes = canvas.current.getContext(\"2d\");\n    allShapes.setTransform(resizingFactor, 0, 0, resizingFactor, 0, 0);\n    let snakeGradient = allShapes.createLinearGradient(255, 50, 50, 200); //creates color of snake body parts\n\n    snakeGradient.addColorStop(0, \"lightgreen\");\n    snakeGradient.addColorStop(1, \"darkgreen\");\n    allShapes.clearRect(0, 0, window.innerWidth, window.innerHeight);\n    snakeShapes.forEach(([x, y]) => {\n      allShapes.fillStyle = snakeGradient; //size of snake body parts (.91)\n\n      allShapes.fillRect(x, y, .91, .91);\n    });\n    allShapes.fillStyle = \"red\";\n    allShapes.fillRect(targetShape[0], targetShape[1], 1, 1);\n  }, [snakeShapes, targetShape, youLose]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onKeyDown: e => snakeKeyMovement(e),\n    style: {\n      border: \"none\",\n      outline: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: playSnakeGame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }, \"Play\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onclick: changeBackgroundColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, \"Toggle Background\"), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    style: {\n      border: \"1px solid lightgreen\"\n    },\n    ref: canvas,\n    height: `${snakeWindowSize[1]}px`,\n    width: `${snakeWindowSize[0]}px`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/user/Desktop/Snake-Spike/spike-exercise-snake-game/react-snake-START-HERE/src/App.js"],"names":["Button","useInterval","setLoopSpeed","React","useState","useEffect","useRef","snakeWindowSize","window","innerWidth","innerHeight","totalScore","snakeCoordinates","lastArrowPushed","appleCoordinates","Math","floor","random","resizingFactor","snakeSpeed","createNewTargetShape","snakeEatsTargetShape","newTargetShape","arrayCopy","getArrowKeyEvent","changeSnakeDirection","keyCode","console","log","stopAllAnimation","setSnakeSpeed","playerLoses","alert","placeNewApple","targetShape","map","_a","i","App","youLose","setYouLose","canvas","snakeShapes","startingSnakePosition","targetShapeLocation","snakeDirections","backgroundColor","setBackgroundColor","snakeController","stopMovement","snakeKeyMovement","playSnakeGame","changeBackgroundColor","shapeResizingFactor","snakeItem","snakeBody","snakeShape","snakeEatsApple","snakeCopy","JSON","parse","stringify","newSnakeHead","unshift","pop","allShapes","current","getContext","setTransform","snakeGradient","createLinearGradient","addColorStop","clearRect","forEach","x","y","fillStyle","fillRect","e","border","outline"],"mappings":"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","sourcesContent":["/*\nTeam Eikon - Spike Exercise - Snake Game\n\nPurpose: To get our team familiar with moving and manipulating objects around the DOM with React JS.\n          This will assist us with creating tree visualizations and node transitions \n          for our final project.\n\nCITATIONS: Resources, tutorials, and websites used or referenced for this spike exercise are below.\n\n  1. Snake in 100 Lines Tutorial: https://github.com/weibenfalk/react-snake-starter-files\n  2. INK - ReactJS Console Applications (Snake Tutorial): https://www.youtube.com/watch?v=GaRXxmofjhw\n  3. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform\n  4. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillRect\n  5. https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D\n  6. Snake Tutorial: https://github.com/ChigabigaChannel/react-hour-projects/tree/master/snake-game/src\n                    https://www.youtube.com/watch?v=-oOgsGP3t5o && https://www.youtube.com/watch?v=lgK7OTdT-eo\n  7. SNAKE GAME in React js: https://www.youtube.com/watch?v=SGsRHWu_01U\n  8. Making a snake game using React Hooks: https://dev.to/aligumustosun/making-a-snake-game-using-react-hooks-5606\n*/\n\nimport Button from '@material-ui/core/Button';\nimport { useInterval as setLoopSpeed } from \"./useInterval\"; //change\nimport React from \"react\";\nimport { useState, useEffect, useRef } from 'react';\n\nconst snakeWindowSize = [window.innerWidth - 600, window.innerHeight - 200];\nlet totalScore = 0;\nlet snakeCoordinates = [[11, 10]];\n/*\n  This vairable contains the last arrow key code that was pushed.\n  This helps avoid key collisions with the snake. For example,\n  pressing the left arrow followed by the right arrow can kill the\n  snake if the last arrow key is not kept track of.\n*/\nlet lastArrowPushed = 0;\n\n//Generates random coordinates for apple placement\nlet appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\n//resizes shape objects\nlet resizingFactor = 34;\n//Controls snake speed\nlet snakeSpeed = 220;\n\n//Creates a new target rectangle for the snake to eat upon collision\nfunction createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape) {\n  while (snakeEatsTargetShape(newTargetShape, arrayCopy)) {\n    newTargetShape = createNewTargetShape();\n  }\n  return newTargetShape;\n}\n\n\n/*\n  function getArrowKeyEvent\n  Takes in a key event to direct snake movement.\n  Logic helps avoid collisions with body parts \n  of the snake. (e.g. pressing up arrow followed by down arrow)\n*/\nfunction getArrowKeyEvent(changeSnakeDirection) {\n  return ({ keyCode }) => {\n    console.log(\"snake is moving\");\n    console.log(keyCode);\n    if (keyCode === 38) {\n      console.log(\"Up ARROW pushed\");\n      if (!(lastArrowPushed === 40)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 38;\n        changeSnakeDirection([0, -1]);\n      }\n    } else if (keyCode === 39) {\n      console.log(\"Right ARROW pushed\");\n      if (!(lastArrowPushed === 37)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 39;\n        changeSnakeDirection([1, 0]);\n      }\n    } else if (keyCode === 40) {\n      console.log(\"Down ARRAOW pushed\");\n      if (!(lastArrowPushed === 38)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 40;\n        changeSnakeDirection([0, 1]);\n      }\n    } else if (keyCode === 37) {\n      console.log(\"Left ARROW pushed\");\n      if (!(lastArrowPushed === 39)) {\n        console.log(\"All is good\");\n        lastArrowPushed = 37;\n        changeSnakeDirection([-1, 0]);\n      }\n    }\n  };\n}\n\n\n/*\n  function stopAllAnimation\n    Stops all animation when the game is over.\n*/\nfunction stopAllAnimation(setSnakeSpeed, playerLoses) {\n  return () => {\n    //Kills the snake speed\n    setSnakeSpeed(null);\n    //sets player loss variable to true\n    playerLoses(true);\n    //Give alert message\n    alert(\"Nice Job! You ate \" + totalScore + \" apples!\");\n  };\n}\n\n\nfunction placeNewApple(targetShape) {\n  return () => targetShape.map((_a, i) => Math.floor(Math.random() * (snakeWindowSize[i] / resizingFactor)));\n}\n\nconst App = () => {\n  let [youLose, setYouLose] = useState(false);\n  let canvas = useRef();\n  let [snakeShapes, startingSnakePosition] = useState(snakeCoordinates);\n  let [targetShape, targetShapeLocation] = useState(appleCoordinates);\n  let [snakeDirections, changeSnakeDirection] = useState([0, -1]);\n  let [snakeSpeed, setSnakeSpeed] = useState(null);\n  let [backgroundColor, setBackgroundColor] = useState(\"black\");\n\n  setLoopSpeed(() => snakeController(), snakeSpeed);\n\n  let stopMovement = stopAllAnimation(setSnakeSpeed, setYouLose);\n\n  const snakeKeyMovement = getArrowKeyEvent(changeSnakeDirection);\n\n  const playSnakeGame = () => {\n    //Sets snake speed upon hitting the play button\n    //This overrides snake speed above.\n    //Adjust here for different speeds.\n    snakeSpeed = 180;\n    //Gives random apple coordinates for next game\n    appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\n    //Resets total apple score\n    totalScore = 0;\n    //Sets the location of the target shape (apple)\n    targetShapeLocation(appleCoordinates);\n    //Sets starting snake position\n    startingSnakePosition(snakeCoordinates);\n    //Sets the initial snake direction\n    changeSnakeDirection([0, -1]);\n    //Sets snake speed\n    setSnakeSpeed(snakeSpeed);\n    //Resets player loss \n    setYouLose(false);\n  };\n\n  const changeBackgroundColor = () => {\n    setBackgroundColor(\"lightblue\");\n  }\n\n\n  const createNewTargetShape = placeNewApple(targetShape);\n\n  const shapeResizingFactor = (snakeItem, snakeBody = snakeShapes) => {\n    if ( snakeItem[0] * resizingFactor >= snakeWindowSize[0] || snakeItem[0] < 0 || snakeItem[1] * resizingFactor >= snakeWindowSize[1] || snakeItem[1] < 0)\n    {\n      return true;\n    }\n    for (let snakeShape of snakeBody) {\n      if (snakeItem[0] === snakeShape[0] && snakeItem[1] === snakeShape[1]) return true;\n    }\n    return false;\n  };\n\n  const snakeEatsApple = arrayCopy => { \n    if ((targetShape[0] === arrayCopy[0][0]) && (targetShape[1] === arrayCopy[0][1])) \n    {\n      //creates a new target shape for the snake\n      let newTargetShape = createNewTargetShape();\n      newTargetShape = createNewTargetShape(shapeResizingFactor, newTargetShape, arrayCopy, createNewTargetShape);\n      targetShapeLocation(newTargetShape);\n      //slowly increases snake speed as apples are eaten\n      if(snakeSpeed >= 70) \n      {\n        snakeSpeed = snakeSpeed - 10;\n        setSnakeSpeed(snakeSpeed);\n      }\n      //increments score\n      totalScore += 1;\n      return true;\n    }\n    return false;\n  };\n\n\n\n  const snakeController = () => {\n    const snakeCopy = JSON.parse(JSON.stringify(snakeShapes));\n    //creates snake head from array and copies directions over\n    const newSnakeHead = [snakeCopy[0][0] + snakeDirections[0], snakeCopy[0][1] + snakeDirections[1]];\n    snakeCopy.unshift(newSnakeHead);\n    if(shapeResizingFactor(newSnakeHead))\n    {\n      stopMovement();\n    }\n    if(!snakeEatsApple(snakeCopy)) {\n      snakeCopy.pop();\n    }\n    startingSnakePosition(snakeCopy);\n  };\n\n\n  useEffect(() => {\n    const allShapes = canvas.current.getContext(\"2d\");\n    allShapes.setTransform(resizingFactor, 0, 0, resizingFactor, 0, 0);\n    let snakeGradient = allShapes.createLinearGradient(255, 50, 50, 200);\n    //creates color of snake body parts\n    snakeGradient.addColorStop(0, \"lightgreen\");\n    snakeGradient.addColorStop(1, \"darkgreen\");\n    allShapes.clearRect(0, 0, window.innerWidth, window.innerHeight);\n\n    snakeShapes.forEach(([x, y]) => {\n      allShapes.fillStyle = snakeGradient;\n      //size of snake body parts (.91)\n      allShapes.fillRect(x, y, .91, .91);\n    });\n\n    allShapes.fillStyle = \"red\";\n    allShapes.fillRect(targetShape[0], targetShape[1], 1, 1);\n  }, [snakeShapes, targetShape, youLose]);\n\n\n  return (\n    <div onKeyDown={e => snakeKeyMovement(e)} style={{ border: \"none\", outline: \"none\"  }}  > \n      <Button variant=\"contained\" color=\"secondary\" onClick={playSnakeGame}>\n        Play\n      </Button>\n      <Button variant=\"contained\" color=\"secondary\" onclick={changeBackgroundColor}>\n        Toggle Background\n      </Button>\n      <center>\n        <canvas style={{ border: \"1px solid lightgreen\" }} ref={canvas} height={`${snakeWindowSize[1]}px`} width={`${snakeWindowSize[0]}px`}/>\n      </center>\n    </div>\n  );\n};\nexport default App;\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}