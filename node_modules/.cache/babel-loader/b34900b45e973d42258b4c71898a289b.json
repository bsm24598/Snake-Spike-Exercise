{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/Snake-Spike/spike-exercise-snake-game/react-snake-START-HERE/src/App.js\";\nimport Button from '@material-ui/core/Button'; //import { useInterval as setLoopSpeed } from \"./useInterval\"; //change\n//import React, { useState, useRef, useEffect } from \"react\"; //change\n\nimport React from \"react\";\nimport { useState, useEffect, useRef } from 'react'; //program variables\n\nconst boardGameSize = [window.innerWidth - 600, window.innerHeight - 200];\nlet totalScore = 0;\nlet snakeCoordinates = [[11, 10]]; //last key that was pushed in the game.\n//this helps avoid key collisions\n//Please refer to snakeKeyMovement method\n\nlet lastArrowPushed = 0;\nlet appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\nlet resizing = 34;\nlet snakeSpeed = 220; //Creates a new target rectangle for the snake to eat upon collision\n\nfunction createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape) {\n  while (snakeEatsTargetShape(newTargetShape, arrayCopy)) {\n    newTargetShape = createNewTargetShape();\n  }\n\n  return newTargetShape;\n}\n\nfunction getArrowKeyEvent(changeSnakeDirection) {\n  return ({\n    keyCode\n  }) => {\n    console.log(\"snake is moving\");\n    console.log(keyCode);\n\n    if (keyCode === 38) {\n      console.log(\"Up ARROW pushed\");\n\n      if (!(lastArrowPushed === 40)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 38;\n        changeSnakeDirection([0, -1]);\n      }\n    } else if (keyCode === 39) {\n      console.log(\"Right ARROW pushed\");\n\n      if (!(lastArrowPushed === 37)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 39;\n        changeSnakeDirection([1, 0]);\n      }\n    } else if (keyCode === 40) {\n      console.log(\"Down ARRAOW pushed\");\n\n      if (!(lastArrowPushed === 38)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 40;\n        changeSnakeDirection([0, 1]);\n      }\n    } else if (keyCode === 37) {\n      console.log(\"Left ARROW pushed\");\n\n      if (!(lastArrowPushed === 39)) {\n        console.log(\"All is good\");\n        lastArrowPushed = 37;\n        changeSnakeDirection([-1, 0]);\n      }\n    }\n  };\n}\n\nfunction setLoopSpeed(callback, delay) {\n  const savedCallback = useRef(); // Remember the latest callback.\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]); // Set up the interval.\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nfunction stopAllAnimation(setSnakeSpeed, setYouLose) {\n  return () => {\n    setSnakeSpeed(null);\n    setYouLose(true); //Give alert message\n\n    alert(\"Nice Job! You ate \" + totalScore + \" apples!\");\n  };\n}\n\nconst App = () => {\n  let [youLose, setYouLose] = useState(false);\n  let canvas = useRef();\n  let [snakeShapes, startingSnakePosition] = useState(snakeCoordinates); //change\n\n  let [targetShape, targetShapeLocation] = useState(appleCoordinates); //change\n\n  let [snakeDirections, changeSnakeDirection] = useState([0, -1]);\n  let [snakeSpeed, setSnakeSpeed] = useState(null);\n  setLoopSpeed(() => snakeController(), snakeSpeed);\n  let stopMovement = stopAllAnimation(setSnakeSpeed, setYouLose);\n  const snakeKeyMovement = getArrowKeyEvent(changeSnakeDirection);\n\n  const playSnakeGame = () => {\n    //adjust snake speed here\n    snakeSpeed = 180;\n    appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\n    totalScore = 0;\n    targetShapeLocation(appleCoordinates);\n    startingSnakePosition(snakeCoordinates);\n    changeSnakeDirection([0, -1]); //change \n\n    setSnakeSpeed(snakeSpeed); //change \n\n    setYouLose(false); //change \n  };\n\n  const createNewTargetShape = () => //change\n  targetShape.map((_a, i) => Math.floor(Math.random() * (boardGameSize[i] / resizing))); //change\n\n\n  const snakeEatsTargetShape = (piece, snk = snakeShapes) => {\n    //change\n    if ( //change\n    piece[0] * resizing >= boardGameSize[0] || //change\n    piece[0] < 0 || //change\n    piece[1] * resizing >= boardGameSize[1] || //change\n    piece[1] < 0 //change\n    ) return true; //change\n\n    for (const segment of snk) {\n      //change\n      if (piece[0] === segment[0] && piece[1] === segment[1]) return true; //change\n    }\n\n    return false; //change\n  };\n\n  const snakeEatsApple = arrayCopy => {\n    if (targetShape[0] === arrayCopy[0][0] && targetShape[1] === arrayCopy[0][1]) {\n      //creates a new target shape for the snake\n      let newTargetShape = createNewTargetShape();\n      newTargetShape = createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape);\n      targetShapeLocation(newTargetShape);\n\n      if (snakeSpeed >= 70) {\n        snakeSpeed = snakeSpeed - 10;\n        setSnakeSpeed(snakeSpeed);\n      }\n\n      totalScore += 1;\n      return true;\n    }\n\n    return false;\n  };\n\n  const snakeController = () => {\n    //change \n    const snakeCopy = JSON.parse(JSON.stringify(snakeShapes)); //change \n\n    const newSnakeHead = [snakeCopy[0][0] + snakeDirections[0], snakeCopy[0][1] + snakeDirections[1]]; //change \n\n    snakeCopy.unshift(newSnakeHead); //change \n\n    if (snakeEatsTargetShape(newSnakeHead)) stopMovement(); //change \n\n    if (!snakeEatsApple(snakeCopy)) snakeCopy.pop(); //change \n\n    startingSnakePosition(snakeCopy); //change \n  };\n\n  useEffect(() => {\n    //change \n    const shapes = canvas.current.getContext(\"2d\"); //change \n\n    shapes.setTransform(resizing, 0, 0, resizing, 0, 0); //change \n\n    let snakeGradient = shapes.createLinearGradient(255, 50, 50, 200);\n    snakeGradient.addColorStop(0, \"brown\");\n    snakeGradient.addColorStop(1, \"black\");\n    shapes.clearRect(0, 0, window.innerWidth, window.innerHeight); //change \n\n    snakeShapes.forEach(([x, y]) => {\n      shapes.fillStyle = snakeGradient;\n      shapes.fillRect(x, y, .91, .91);\n    });\n    shapes.fillStyle = \"red\"; //change \n\n    shapes.fillRect(targetShape[0], targetShape[1], 1, 1); //change \n  }, [snakeShapes, targetShape, youLose]); //change \n\n  return (\n    /*#__PURE__*/\n    //change \n    React.createElement(\"div\", {\n      onKeyDown: e => snakeKeyMovement(e),\n      style: {\n        border: \"none\",\n        outline: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: playSnakeGame,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }\n    }, \"Play\"), /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      style: {\n        border: \"1px solid black\"\n      },\n      ref: canvas,\n      width: `${boardGameSize[0]}px`,\n      height: `${boardGameSize[1]}px`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    })))\n  ); //change \n};\n\nexport default App;","map":{"version":3,"sources":["/home/user/Desktop/Snake-Spike/spike-exercise-snake-game/react-snake-START-HERE/src/App.js"],"names":["Button","React","useState","useEffect","useRef","boardGameSize","window","innerWidth","innerHeight","totalScore","snakeCoordinates","lastArrowPushed","appleCoordinates","Math","floor","random","resizing","snakeSpeed","createNewTargetShape","snakeEatsTargetShape","newTargetShape","arrayCopy","getArrowKeyEvent","changeSnakeDirection","keyCode","console","log","setLoopSpeed","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval","stopAllAnimation","setSnakeSpeed","setYouLose","alert","App","youLose","canvas","snakeShapes","startingSnakePosition","targetShape","targetShapeLocation","snakeDirections","snakeController","stopMovement","snakeKeyMovement","playSnakeGame","map","_a","i","piece","snk","segment","snakeEatsApple","snakeCopy","JSON","parse","stringify","newSnakeHead","unshift","pop","shapes","getContext","setTransform","snakeGradient","createLinearGradient","addColorStop","clearRect","forEach","x","y","fillStyle","fillRect","e","border","outline"],"mappings":"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","sourcesContent":["import Button from '@material-ui/core/Button';\n//import { useInterval as setLoopSpeed } from \"./useInterval\"; //change\n//import React, { useState, useRef, useEffect } from \"react\"; //change\nimport React from \"react\";\nimport { useState, useEffect, useRef } from 'react';\n\n\n//program variables\n\nconst boardGameSize = [window.innerWidth - 600, window.innerHeight - 200];\nlet totalScore = 0;\nlet snakeCoordinates = [[11, 10]];\n//last key that was pushed in the game.\n//this helps avoid key collisions\n//Please refer to snakeKeyMovement method\nlet lastArrowPushed = 0;\nlet appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\nlet resizing = 34;\nlet snakeSpeed = 220;\n\n//Creates a new target rectangle for the snake to eat upon collision\nfunction createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape) {\n  while (snakeEatsTargetShape(newTargetShape, arrayCopy)) {\n    newTargetShape = createNewTargetShape();\n  }\n  return newTargetShape;\n}\n\nfunction getArrowKeyEvent(changeSnakeDirection) {\n  return ({ keyCode }) => {\n    console.log(\"snake is moving\");\n    console.log(keyCode);\n    if (keyCode === 38) {\n      console.log(\"Up ARROW pushed\");\n      if (!(lastArrowPushed === 40)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 38;\n        changeSnakeDirection([0, -1]);\n      }\n    } else if (keyCode === 39) {\n      console.log(\"Right ARROW pushed\");\n      if (!(lastArrowPushed === 37)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 39;\n        changeSnakeDirection([1, 0]);\n      }\n    } else if (keyCode === 40) {\n      console.log(\"Down ARRAOW pushed\");\n      if (!(lastArrowPushed === 38)) {\n        console.log(\"ALL IS GOOD\");\n        lastArrowPushed = 40;\n        changeSnakeDirection([0, 1]);\n      }\n    } else if (keyCode === 37) {\n      console.log(\"Left ARROW pushed\");\n      if (!(lastArrowPushed === 39)) {\n        console.log(\"All is good\");\n        lastArrowPushed = 37;\n        changeSnakeDirection([-1, 0]);\n      }\n    }\n  };\n}\n\nfunction setLoopSpeed(callback, delay) \n{\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nfunction stopAllAnimation(setSnakeSpeed, setYouLose) {\n  return () => {\n    setSnakeSpeed(null);\n    setYouLose(true);\n    //Give alert message\n    alert(\"Nice Job! You ate \" + totalScore + \" apples!\");\n  };\n}\n\nconst App = () => {\n  let [youLose, setYouLose] = useState(false);\n  let canvas = useRef();\n  let [snakeShapes, startingSnakePosition] = useState(snakeCoordinates); //change\n  let [targetShape, targetShapeLocation] = useState(appleCoordinates); //change\n  let [snakeDirections, changeSnakeDirection] = useState([0, -1]);\n  let [snakeSpeed, setSnakeSpeed] = useState(null);\n\n\n  setLoopSpeed(() => snakeController(), snakeSpeed);\n\n  let stopMovement = stopAllAnimation(setSnakeSpeed, setYouLose);\n\n  const snakeKeyMovement = getArrowKeyEvent(changeSnakeDirection);\n\n  const playSnakeGame = () => {\n    //adjust snake speed here\n    snakeSpeed = 180;\n    appleCoordinates = [Math.floor(Math.random() * 5), Math.floor(Math.random() * 5)];\n    totalScore = 0;\n    targetShapeLocation(appleCoordinates);\n    startingSnakePosition(snakeCoordinates);\n\n    changeSnakeDirection([0, -1]); //change \n    setSnakeSpeed(snakeSpeed); //change \n    setYouLose(false); //change \n  };\n\n\n  const createNewTargetShape = () => //change\n    targetShape.map((_a, i) => Math.floor(Math.random() * (boardGameSize[i] / resizing))); //change\n\n  const snakeEatsTargetShape = (piece, snk = snakeShapes) => { //change\n    if ( //change\n      piece[0] * resizing >= boardGameSize[0] || //change\n      piece[0] < 0 || //change\n      piece[1] * resizing >= boardGameSize[1] || //change\n      piece[1] < 0 //change\n    )\n      return true; //change\n\n    for (const segment of snk) { //change\n      if (piece[0] === segment[0] && piece[1] === segment[1]) return true; //change\n    }\n    return false; //change\n  };\n\n  const snakeEatsApple = arrayCopy => { \n    if ((targetShape[0] === arrayCopy[0][0]) && (targetShape[1] === arrayCopy[0][1])) {\n      //creates a new target shape for the snake\n      let newTargetShape = createNewTargetShape();\n      newTargetShape = createNewTargetShape(snakeEatsTargetShape, newTargetShape, arrayCopy, createNewTargetShape);\n      targetShapeLocation(newTargetShape);\n      if(snakeSpeed >= 70) \n      {\n        snakeSpeed = snakeSpeed - 10;\n        setSnakeSpeed(snakeSpeed);\n      }\n      totalScore += 1;\n      return true;\n    }\n    return false;\n  };\n\n\n  const snakeController = () => {//change \n    const snakeCopy = JSON.parse(JSON.stringify(snakeShapes));//change \n    const newSnakeHead = [snakeCopy[0][0] + snakeDirections[0], snakeCopy[0][1] + snakeDirections[1]];//change \n    snakeCopy.unshift(newSnakeHead);//change \n    if (snakeEatsTargetShape(newSnakeHead)) stopMovement();//change \n    if (!snakeEatsApple(snakeCopy)) snakeCopy.pop();//change \n    startingSnakePosition(snakeCopy);//change \n  };\n\n\n\n  useEffect(() => { //change \n    const shapes = canvas.current.getContext(\"2d\");//change \n    shapes.setTransform(resizing, 0, 0, resizing, 0, 0); //change \n    let snakeGradient = shapes.createLinearGradient(255, 50, 50, 200);\n    snakeGradient.addColorStop(0, \"brown\");\n    snakeGradient.addColorStop(1, \"black\");\n    shapes.clearRect(0, 0, window.innerWidth, window.innerHeight); //change \n    \n    snakeShapes.forEach(([x, y]) => {\n      shapes.fillStyle = snakeGradient;\n      shapes.fillRect(x, y, .91, .91);\n    });\n    shapes.fillStyle = \"red\"; //change \n    shapes.fillRect(targetShape[0], targetShape[1], 1, 1);  //change \n  }, [snakeShapes, targetShape, youLose]); //change \n\n  return ( //change \n    <div onKeyDown={e => snakeKeyMovement(e)} style={{ border: \"none\", outline: \"none\"  }}  > \n\n      <Button variant=\"contained\" color=\"secondary\" onClick={playSnakeGame}>\n        Play\n      </Button>\n\n      <center>\n\n        <canvas\n          style={{ border: \"1px solid black\" }}\n          ref={canvas}\n          width={`${boardGameSize[0]}px`}\n          height={`${boardGameSize[1]}px`}\n        />\n\n      </center>\n\n    </div>\n  ); //change \n};\n\nexport default App;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}